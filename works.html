<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Works - Jonas</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="sidebar.css">
</head>
<body>
    <div class="container">
        <nav class="sidebar">
            <ul>
                <li><a href="index.html#blog">Blog</a></li>
                <li><a href="works.html">Works</a></li>
                <li><a href="music.html">Music</a></li>
                <li><a href="radio.html">Radio</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
        </nav>

        <main class="content">
            <section class="works-section">
                <h2>Works</h2>
                <div id="works-posts" class="blog-container">
                    <!-- Works posts will be loaded here from Google Sheets -->
                </div>
            </section>

            <section class="works-section">
                <h2>Commissions</h2>
                <div id="commissions-posts" class="blog-container">
                    <!-- Commissions posts will be loaded here from Google Sheets -->
                </div>
            </section>

            <section class="works-section">
                <h2>Exhibitions</h2>
                <div id="exhibitions-posts" class="blog-container">
                    <!-- Exhibitions posts will be loaded here from Google Sheets -->
                </div>
            </section>
        </main>
    </div>

    <script>
    // CÃ³digo JS para cargar las entradas de 'works', 'commissions' y 'exhibitions'
    const SPREADSHEET_ID = '1Cns-OOGDcvg3-EaqWPqkzRFG_yazsx3TWzHkOcIMQJQ';
    const API_KEY = 'AIzaSyDVrLJHQXvGxL0HryTLkPLQlvIM0MJAbvk';
    
    function createPostElement(post) {
        const [date = '', title = '', content = '', imageUrl = '', section = ''] = post;
        const postElement = document.createElement('div');
        postElement.className = 'blog-post';
        const imageHtml = imageUrl && imageUrl.trim() !== '' 
            ? `<img src="${imageUrl}" alt="${title}">` 
            : '';
        postElement.innerHTML = `
            <h2>${title}</h2>
            ${imageHtml}
            <div class="content">${content}</div>
        `;
        return postElement;
    }
    
    async function loadAllPosts() {
        try {
            const response = await fetch(
                `https://sheets.googleapis.com/v4/spreadsheets/${SPREADSHEET_ID}/values/Sheet1!A:E?key=${API_KEY}`
            );
            const data = await response.json();
            if (!data.values) {
                throw new Error('No data found in the spreadsheet');
            }
            
            const posts = data.values.slice(1); // Skip header row
            
            // Clear all containers
            document.getElementById('works-posts').innerHTML = '';
            document.getElementById('commissions-posts').innerHTML = '';
            document.getElementById('exhibitions-posts').innerHTML = '';
            
            posts.forEach((post, idx) => {
                const [date = '', title = '', content = '', imageUrl = '', section = ''] = post;
                const sectionLower = section.trim().toLowerCase();
                
                let container;
                if (sectionLower === 'works') {
                    container = document.getElementById('works-posts');
                } else if (sectionLower === 'commissions') {
                    container = document.getElementById('commissions-posts');
                } else if (sectionLower === 'exhibitions') {
                    container = document.getElementById('exhibitions-posts');
                }
                
                if (container) {
                    const postElement = createPostElement(post);
                    container.appendChild(postElement);
                }
            });
            
        } catch (error) {
            console.error('Error loading posts:', error);
            const errorMessage = `
                <div class="error-message">
                    <p>Error loading posts. Please check:</p>
                    <ul>
                        <li>Your spreadsheet ID and API key are correct</li>
                        <li>The Google Sheet is shared publicly</li>
                        <li>Your spreadsheet has the correct column headers</li>
                    </ul>
                    <p>Error details: ${error.message}</p>
                </div>
            `;
            document.getElementById('works-posts').innerHTML = errorMessage;
            document.getElementById('commissions-posts').innerHTML = errorMessage;
            document.getElementById('exhibitions-posts').innerHTML = errorMessage;
        }
    }
    
    document.addEventListener('DOMContentLoaded', loadAllPosts);
    </script>
</body>
</html> 